(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const re="modulepreload",se=function(e){return"/wasmoptim/"+e},$={},k=function(t,r,s){if(!r||r.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(r.map(n=>{if(n=se(n),n in $)return;$[n]=!0;const a=n.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!s)for(let l=o.length-1;l>=0;l--){const m=o[l];if(m.href===n&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${c}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":re,a||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),a)return new Promise((l,m)=>{d.addEventListener("load",l),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n})},B="/wasmoptim/spinner.svg",v=new Map,ne="FileSystemHandle"in window&&"getUniqueId"in FileSystemHandle.prototype,W=async e=>{for(const t of e)await t.handle.requestPermission({mode:"readwrite"})},ae=async e=>{const t=[],r=async o=>{const n=await new Promise(a=>o.readEntries(a));await Promise.all(n.map(async a=>{a.isDirectory?await r(a.createReader()):t.push(a)}))},s=e.createReader();return await r(s),t},H=async(e,t,r=e.name,s)=>{const o=[],n=[];for await(const a of e.values()){const c=`${r}/${a.name}`;a.kind==="file"?n.push(a.getFile().then(i=>(i.directoryHandle=e,i.handle=a,Object.defineProperty(i,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>c})))):a.kind==="directory"&&t&&o.push(H(a,t,c))}return[...(await Promise.all(o)).flat(),...await Promise.all(n)]},oe=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ie=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ce=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],le=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],M=(e,t,r)=>{let s=e;return typeof t=="string"||Array.isArray(t)?s=e.toLocaleString(t,r):(t===!0||r!==void 0)&&(s=e.toLocaleString(void 0,r)),s};function g(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const r=t.bits?t.binary?le:ce:t.binary?ie:oe,s=t.space?" ":"";if(t.signed&&e===0)return` 0${s}${r[0]}`;const o=e<0,n=o?"-":t.signed?"+":"";o&&(e=-e);let a;if(t.minimumFractionDigits!==void 0&&(a={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(a={maximumFractionDigits:t.maximumFractionDigits,...a}),e<1){const l=M(e,t.locale,a);return n+l+s+r[0]}const c=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),r.length-1);e/=(t.binary?1024:1e3)**c,a||(e=e.toPrecision(3));const i=M(Number(e),t.locale,a),d=r[c];return n+i+s+d}const b=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),de=b?Promise.resolve().then(function(){return ge}):Promise.resolve().then(function(){return ke});async function ue(...e){return(await de).default(...e)}const me=b?Promise.resolve().then(function(){return ve}):Promise.resolve().then(function(){return xe});async function fe(...e){return(await me).default(...e)}const pe=b?Promise.resolve().then(function(){return Se}):Promise.resolve().then(function(){return _e});async function G(...e){return(await pe).default(...e)}const ye=async e=>{const t=await e.getFile();return t.handle=e,t};var he=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((o,n)=>{t[n]={description:o.description||"Files",accept:{}},o.mimeTypes?o.mimeTypes.map(a=>{t[n].accept[a]=o.extensions||[]}):t[n].accept["*/*"]=o.extensions||[]});const r=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),s=await Promise.all(r.map(ye));return e[0].multiple?s:s[0]},ge={__proto__:null,default:he};function z(e){function t(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var s=r.done;return Promise.resolve(r.value).then(function(o){return{value:o,done:s}})}return z=function(r){this.s=r,this.n=r.next},z.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var s=this.s.return;return s===void 0?Promise.resolve({value:r,done:!0}):t(s.apply(this.s,arguments))},throw:function(r){var s=this.s.return;return s===void 0?Promise.reject(r):t(s.apply(this.s,arguments))}},new z(e)}const Z=async(e,t,r=e.name,s)=>{const o=[],n=[];var a,c=!1,i=!1;try{for(var d,l=function(m){var u,f,y,x=2;for(typeof Symbol<"u"&&(f=Symbol.asyncIterator,y=Symbol.iterator);x--;){if(f&&(u=m[f])!=null)return u.call(m);if(y&&(u=m[y])!=null)return new z(u.call(m));f="@@asyncIterator",y="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());c=!(d=await l.next()).done;c=!1){const m=d.value,u=`${r}/${m.name}`;m.kind==="file"?n.push(m.getFile().then(f=>(f.directoryHandle=e,f.handle=m,Object.defineProperty(f,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>u})))):m.kind!=="directory"||!t||s&&s(m)||o.push(Z(m,t,u,s))}}catch(m){i=!0,a=m}finally{try{c&&l.return!=null&&await l.return()}finally{if(i)throw a}}return[...(await Promise.all(o)).flat(),...await Promise.all(n)]};var we=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:Z(t,e.recursive,void 0,e.skipDirectory)},ve={__proto__:null,default:we},be=async(e,t=[{}],r=null,s=!1,o=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const n=[];let a=null;if(e instanceof Blob&&e.type?a=e.type:e.headers&&e.headers.get("content-type")&&(a=e.headers.get("content-type")),t.forEach((d,l)=>{n[l]={description:d.description||"Files",accept:{}},d.mimeTypes?(l===0&&a&&d.mimeTypes.push(a),d.mimeTypes.map(m=>{n[l].accept[m]=d.extensions||[]})):a?n[l].accept[a]=d.extensions||[]:n[l].accept["*/*"]=d.extensions||[]}),r)try{await r.getFile()}catch(d){if(r=null,s)throw d}const c=r||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:n,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!r&&o&&o(c);const i=await c.createWritable();return"stream"in e?(await e.stream().pipeTo(i),c):"body"in e?(await e.body.pipeTo(i),c):(await i.write(await e),await i.close(),c)},Se={__proto__:null,default:be},Le=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,r)=>{const s=document.createElement("input");s.type="file";const o=[...e.map(i=>i.mimeTypes||[]),...e.map(i=>i.extensions||[])].join();s.multiple=e[0].multiple||!1,s.accept=o||"",s.style.display="none",document.body.append(s);const n=i=>{typeof a=="function"&&a(),t(i)},a=e[0].legacySetup&&e[0].legacySetup(n,()=>a(r),s),c=()=>{window.removeEventListener("focus",c),s.remove()};s.addEventListener("click",()=>{window.addEventListener("focus",c)}),s.addEventListener("change",()=>{window.removeEventListener("focus",c),s.remove(),n(s.multiple?Array.from(s.files):s.files[0])}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),ke={__proto__:null,default:Le},Ee=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,r)=>{const s=document.createElement("input");s.type="file",s.webkitdirectory=!0;const o=a=>{typeof n=="function"&&n(),t(a)},n=e[0].legacySetup&&e[0].legacySetup(o,()=>n(r),s);s.addEventListener("change",()=>{let a=Array.from(s.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(a=a.filter(c=>c.webkitRelativePath.split("/").every(i=>!e[0].skipDirectory({name:i,kind:"directory"})))):a=a.filter(c=>c.webkitRelativePath.split("/").length===2),o(a)}),"showPicker"in HTMLInputElement.prototype?s.showPicker():s.click()})),xe={__proto__:null,default:Ee},Pe=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const r=document.createElement("a");let s=e;"body"in e&&(s=await async function(a,c){const i=a.getReader(),d=new ReadableStream({start:u=>async function f(){return i.read().then(({done:y,value:x})=>{if(!y)return u.enqueue(x),f();u.close()})}()}),l=new Response(d),m=await l.blob();return i.releaseLock(),new Blob([m],{type:c})}(e.body,e.headers.get("content-type"))),r.download=t.fileName||"Untitled",r.href=URL.createObjectURL(await s);const o=()=>{typeof n=="function"&&n()},n=t.legacySetup&&t.legacySetup(o,()=>n(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),o()}),r.click(),null},_e={__proto__:null,default:Pe};const Ae=document.querySelector("#load-wasm"),V=document.querySelector("#merge-button"),L=document.querySelector("#merge-area"),qe=document.querySelector("#load-directory"),O=document.querySelector("#drop-area"),w=document.querySelector("#results-area"),ze=document.querySelector("#total-delta-size"),Fe=document.querySelector("#stats-template"),Te=document.querySelector("#example-template"),Ce=document.querySelector("#stats-header"),F=document.querySelector("#select-all-checkbox"),h=document.querySelector("#overwrite-checkbox"),Be=document.querySelector("#observe-file-changes-checkbox"),Y=document.querySelector("#observe-directory-changes-checkbox"),K=document.querySelector("#examples-list"),U=document.querySelector("meta[name=theme-color]"),Oe=document.querySelector("#stats-files"),De=document.querySelector("#stats-size"),Ie=document.querySelector("#stats-percent"),T=crypto.randomUUID();V.addEventListener("click",async()=>{const e=L.querySelector(".file-name"),t=L.querySelector(".before-size"),r=L.querySelector(".after-size"),s=L.querySelector(".delta-size"),o=L.querySelector(".spinner");e.hidden=!0,e.dataset.uuid=T,L.hidden=!1,o.src=B,r.classList.remove("error"),r.textContent="",s.textContent="Merging…",s.classList.remove("size-smaller"),s.classList.remove("size-larger"),s.classList.remove("error");const n=[],a=[];w.querySelectorAll("input:checked").forEach(d=>{const l=d.closest("tr").querySelector("[data-uuid]").dataset.uuid,{file:m}=v.get(l);n.push(m),a.push(l)});const c=n.reduce((d,l)=>d+l.size,0);t.textContent=`Σ ${g(c)}`;const i=new Worker(new URL("/wasmoptim/assets/merge-worker-ib07Dost.js",import.meta.url),{type:"module"});i.addEventListener("message",async d=>{if(d.data.status){s.textContent="Optimizing…";return}i.terminate();const{file:l,error:m}=d.data;if(o.removeAttribute("src"),m){const y=new Error(m);r.classList.add("error"),s.classList.add("error"),r.textContent=y.name,s.textContent=y.message;return}e.hidden=!1,e.querySelector("code").textContent=l.name,r.textContent=g(l.size);const u=l.size-c;console.log(`${new Intl.ListFormat("en",{style:"long",type:"conjunction"}).format(n.map(y=>y.name))} merged → Before Σ: ${c} After: ${l.size} Delta: ${u}`);const f=Math.abs(100-l.size/c*100).toFixed(2);s.textContent=Number(f)===0?"no change":`${f}% ${u<0?"smaller":"larger"} (${g(Math.abs(u))})`,s.classList.add(Number(f)===0?"size-larger":u<0?"size-smaller":"size-larger"),v.set(T,{file:l})}),i.postMessage({wasmFiles:n,uuids:a})});const Ne=async(e,t)=>{const r=[],s=async n=>{for(const[a,c]of n)try{r[a]=await c()}catch(i){r[a]=new Error(`Failed with: ${i.message}`)}},o=new Array(t).fill(e.entries()).map(s);return await Promise.allSettled(o),r},Ue=(e,t)=>{let r;return function(...o){const n=()=>{clearTimeout(r),e(...o)};clearTimeout(r),r=setTimeout(n,t)}},X="https://wasmoptim-stats.glitch.me",Re=async(e,t)=>{const r={"Content-Type":"application/json"},s=JSON.stringify({beforeSize:e,afterSize:t});try{await(await fetch(`${X}/saved-bytes`,{method:"POST",headers:r,body:s})).json()}catch(o){if(location.hostname==="localhost")return;console.error(o.name,o.message)}},J=async()=>{const e={"Content-Type":"application/json"};try{const r=await(await fetch(`${X}/saved-bytes`,{method:"GET",headers:e})).json();Oe.textContent=`${new Intl.NumberFormat().format(r.entryCount)} ${r.entryCount===1?"file":"files"}`,De.textContent=g(r.totalBytesSaved),Ie.textContent=Number(r.averagePercentageSaved).toFixed(2)}catch(t){if(location.hostname==="localhost")return;console.error(t.name,t.message)}};J();const j="setAppBadge"in navigator;let q=0;const _=async(e,t=!1)=>{Ce.hidden=!1,w.closest("table").hidden=!1;const r=[];for(const s of e){const o=ne&&s.handle?await s.handle.getUniqueId():s.name;let n,a,c,i,d,l;const m=w.querySelector(`[data-uuid="${o}"]`);if(m){const u=m.closest("tr");n=u.querySelector(".file-name"),a=u.querySelector(".before-size"),c=u.querySelector(".after-size"),i=u.querySelector(".delta-size"),d=u.querySelector(".spinner"),l=u.querySelector(".merge-checkbox")}else{const u=Fe.content.cloneNode(!0);n=u.querySelector(".file-name"),a=u.querySelector(".before-size"),c=u.querySelector(".after-size"),i=u.querySelector(".delta-size"),d=u.querySelector(".spinner"),l=u.querySelector(".merge-checkbox"),w.append(u);const f=w.querySelectorAll("tr").length>1;F.closest("th").style.display=f?"":"none",w.querySelectorAll("input").forEach(y=>{y.closest("td").style.display=f?"":"none"})}if(d.src=B,i.textContent="Optimizing…",i.classList.remove("size-smaller"),i.classList.remove("size-larger"),i.classList.remove("error"),c.classList.remove("error"),n.querySelector("code").textContent=s.name,n.classList.add("processing"),l.classList.add("processing"),l.disabled=!0,j)try{await navigator.setAppBadge(++q)}catch(u){console.error(u.name,u.message)}a.textContent=g(s.size),n.dataset.uuid=o,r.push(()=>new Promise((u,f)=>{const y=new Worker(new URL("/wasmoptim/assets/binaryen-worker-vGG0wOcy.js",import.meta.url));y.addEventListener("message",async x=>{if(y.terminate(),d.removeAttribute("src"),n.classList.remove("processing"),l.classList.remove("processing"),l.disabled=!1,j){--q;try{q===0?await navigator.clearAppBadge():await navigator.setAppBadge(q)}catch(p){console.error(p.name,p.message)}}const{wasmFileAfter:S,error:I}=x.data;if(I){const p=new Error(I);n.classList.add("error"),c.classList.add("error"),i.classList.add("error"),l.classList.add("error"),l.disabled=!0,c.textContent=p.name,i.textContent=p.message,f(p);return}c.textContent=g(S.size);const E=S.size-s.size;console.log(`${s.name} processed → Before: ${s.size} After: ${S.size} Delta: ${E}`);const C=Math.abs(100-S.size/s.size*100).toFixed(2);i.textContent=Number(C)===0?"no change":`${C}% ${E<0?"smaller":"larger"} (${g(Math.abs(E))})`,i.classList.add(Number(C)===0?"size-larger":E<0?"size-smaller":"size-larger"),v.set(o,{file:S,handle:s.handle,savings:E});const N=[];for(const[p,{savings:A}]of v.entries())p!==T&&N.push(A);const R=N.reduce((p,A)=>p+A,0),te=R/v.size;if(ze.textContent=`Saved ${g(Math.abs(R))} in total and ${g(Math.abs(te))} per file on average`,E<0&&(Re(s.size,S.size).then(()=>J()),ee&&b&&h.checked&&s.handle))try{const p=await s.handle.createWritable();await p.write(S),await p.close()}catch(p){console.error(p.name,p.message)}if(P&&Be.checked&&s.handle){const{getFileSystemChangeObserver:p}=await k(()=>import("./file-system-observer-bRkZsY_G.js"),__vite__mapDeps([]));p().observe(s.handle),console.log(`File ${s.name} → Observing changes`)}u()}),y.postMessage({wasmFileBefore:s})}))}await Ne(r,"hardwareConcurrency"in navigator?Math.floor(navigator.hardwareConcurrency):4)};b&&(h.parentNode.hidden=!1,h.addEventListener("change",()=>{localStorage.setItem("overwrite-original-files",h.checked);const e=[];if(h.checked){for(const[t,{file:r}]of v.entries())t===T||!r.handle||e.push(r);W(e)}}),localStorage.getItem("overwrite-original-files")!=="true"?h.checked=!1:h.checked=!0);const $e=["https://unpkg.com/canvaskit-wasm@0.39.1/bin/canvaskit.wasm","https://unpkg.com/zxing-wasm@1.0.0-rc.4/dist/full/zxing_full.wasm","https://unpkg.com/@sqlite.org/sqlite-wasm@3.44.0-build1/sqlite-wasm/jswasm/sqlite3.wasm","https://unpkg.com/@tensorflow/tfjs-backend-wasm@4.13.0/wasm-out/tfjs-backend-wasm.wasm"],Me=/@(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?/;$e.forEach(e=>{const t=Te.content.cloneNode(!0),r=t.querySelector("code"),s=t.querySelector("a");r.textContent=e.replace("https://unpkg.com/","").replace(Me,""),s.href=e,K.append(t)});K.addEventListener("click",async e=>{const t=e.target.nodeName.toLowerCase();if(t!=="a"&&t!=="code")return;e.preventDefault();const r=e.target.closest("a"),s=r.href,o=r.parentNode.querySelector(".downloading");o.textContent="Downloading…",o.classList.remove("error"),o.hidden=!1;const n=r.parentNode.querySelector("img");n.src=B;try{const a=await fetch(s).then(i=>i.blob());n.removeAttribute("src"),o.hidden=!0;const c=new File([a],s.split("/").pop(),{type:"application/wasm"});c.handle=!1,_([c])}catch(a){console.error(a.name,a.message),n.removeAttribute("src"),o.classList.add("error"),o.textContent=a.message}});document.addEventListener("paste",e=>{try{if(!e.clipboardData.files.length)return;const t=Array.from(e.clipboardData.files).filter(r=>r.type==="application/wasm"||r.name.endsWith(".wasm")||r.name.endsWith(".wat"));_(t)}catch(t){console.error(t.name,t.message)}});const D=()=>{const e=w.querySelectorAll("input:checked").length;V.style.display=e<2?"none":""};D();F.addEventListener("click",()=>{w.querySelectorAll("input:not(:disabled)").forEach(e=>{e.checked=F.checked}),D()});w.addEventListener("click",async e=>{const t=e.target.nodeName.toLowerCase();if(t==="input"||t==="label"){if(e.target.classList.contains("error")||e.target.classList.contains("processing"))return;e.target.checked||(F.checked=!1),D();return}if(t!=="a"&&t!=="code")return;e.preventDefault();const r=e.target.closest("a");if(!r.classList.contains("file-name")||r.classList.contains("error")||r.classList.contains("processing"))return;const s=r.dataset.uuid,{file:o,handle:n}=v.get(s);try{await G(o,{fileName:o.name,extensions:[".wasm",".wat"],mimeTypes:["application/wasm"],existingHandle:n||void 0,startIn:n||void 0})}catch(a){if(a.name==="AbortError")return;console.error(a.name,a.message)}});L.addEventListener("click",async e=>{const t=e.target.nodeName.toLowerCase();if(t!=="a"&&t!=="code")return;e.preventDefault();const r=e.target.closest("a");if(!r.classList.contains("file-name")||r.classList.contains("error")||r.classList.contains("processing"))return;const s=r.dataset.uuid,{file:o,handle:n}=v.get(s);try{await G(o,{fileName:o.name,extensions:[".wasm"],mimeTypes:["application/wasm"],existingHandle:n||void 0,startIn:n||void 0})}catch(a){if(a.name==="AbortError")return;console.error(a.name,a.message)}});qe.addEventListener("click",async()=>{try{const e=await fe({recursive:!0,mode:h.checked?"readwrite":"read"}),t=e.filter(r=>r.type==="application/wasm"||r.name.endsWith(".wasm")||r.name.endsWith(".wat"));if(b&&P&&Y.checked){let r=[];for(const a of e)r.push(a.directoryHandle);r=[...new Set(r)];const{getFileSystemChangeObserver:s,observedDirectories:o}=await k(()=>import("./file-system-observer-bRkZsY_G.js"),__vite__mapDeps([])),n=s();r.forEach(a=>{n.observe(a,{recursive:!0}),o.add(a),console.log(`Directory ${a.name} → Observing changes`)})}_(t)}catch(e){if(e.name==="AbortError")return;console.error(e.name,e.message)}});Ae.addEventListener("click",async()=>{try{const e=await ue({mimeTypes:["application/wasm"],extensions:[".wasm",".wat"],multiple:!0});if(!e||!e.length)return;_(e)}catch(e){if(e.name==="AbortError")return;console.error(e.name,e.message)}});document.addEventListener("dragover",e=>{e.preventDefault()});document.addEventListener("dragenter",e=>{e.preventDefault(),O.classList.add("drag-hover")});document.addEventListener("dragleave",e=>{e.preventDefault(),e.target===document.documentElement&&O.classList.remove("drag-hover")});document.addEventListener("drop",async e=>{e.preventDefault(),O.classList.remove("drag-hover");const t=[...e.dataTransfer.items].filter(n=>n.kind==="file").map(n=>ee?n.getAsFileSystemHandle():n.webkitGetAsEntry()),r=[];let s,o;P&&({getFileSystemChangeObserver:s,observedDirectories:o}=await k(()=>import("./file-system-observer-bRkZsY_G.js"),__vite__mapDeps([])));for await(const n of t){if(n.kind==="directory"){let c=await H(n,!0);if(c=c.filter(i=>i.type==="application/wasm"||i.name.endsWith(".wasm")||i.name.endsWith(".wat")),r.push(...c),P&&Y.checked){let i=[];for(const l of c)i.push(l.directoryHandle);i=[...new Set(i)];const d=s();i.forEach(l=>{d.observe(l,{recursive:!0}),o.add(l),console.log(`Directory ${l.name} → Observing changes`)})}continue}else if(n.isDirectory){let c=await ae(n);c=c.filter(i=>i.name.endsWith(".wasm")||i.name.endsWith(".wat")),r.push(...await Promise.all(c.map(async i=>new Promise(d=>i.file(d)))));continue}let a;n.kind==="file"?(a=await n.getFile(),a.handle=n):n.isFile&&(a=await new Promise(c=>n.file(i=>c(i)))),!(a.type&&a.type!=="application/wasm"||!a.name.endsWith(".wasm")&&!a.name.endsWith(".wat"))&&r.push(a)}b&&b&&h.checked&&await W(r),_(r)});const Q=e=>{if(e.matches){U.content="rgb(32, 33, 36)";return}U.content="#fff"};matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Q);Q(matchMedia("(prefers-color-scheme: dark)"));const ee="getAsFileSystemHandle"in DataTransferItem.prototype,P="FileSystemObserver"in window;(async()=>{if(P&&k(()=>import("./file-system-observer-bRkZsY_G.js"),__vite__mapDeps([])),"launchQueue"in window&&"files"in LaunchParams.prototype&&k(()=>import("./file-handling-2mzXeyDV.js"),__vite__mapDeps([])),"serviceWorker"in navigator){const{registerSW:e}=await k(()=>import("./virtual_pwa-register-vkA2GBtN.js"),__vite__mapDeps([]));e({onOfflineReady(){},onNeedRefresh(){location.reload()}})(),"share"in navigator&&k(()=>import("./web-share-target-t8B_ZJyO.js"),__vite__mapDeps([]))}})();export{T as M,k as _,Y as a,_ as b,h as c,Ue as d,b as e,W as f,Be as o,H as r,ne as s,v as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}