import{d as i,o as s,u as l,a as c}from"./index-c9f47f32.js";let n=null;const d=async e=>{console.log("File system changes detected",e,await e[0].changedHandle.getFile());const o=[];for(const t of e)if(t.type==="modified"){const a=await t.changedHandle.getFile();console.log(`${a.name} modified â†’ Re-optimizing`),a.handle=t.changedHandle,o.push(a)}c(o)},r=()=>(n||(n=new FileSystemObserver(i(e=>{d(e)},250))),n);s.parentNode.hidden=!1;s.addEventListener("change",()=>{if(localStorage.setItem("observe-changes",s.checked),s.checked){r();for(const[,{handle:e}]of l.entries())e&&n.observe(e);return}n&&(n.disconnect(),n=null)});localStorage.getItem("observe-changes")!=="true"?s.checked=!1:s.checked=!0;export{r as getFileSystemChangeObserver};
