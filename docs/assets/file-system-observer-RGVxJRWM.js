import{d as i,o as a,u as l,M as c,a as d}from"./index-HM2gO01i.js";let n=null;const r=async e=>{console.log("File system changes detected",e,await e[0].changedHandle.getFile());const s=[];for(const o of e)if(o.type==="modified"){const t=await o.changedHandle.getFile();console.log(`${t.name} modified → Re-optimizing`),t.handle=o.changedHandle,s.push(t)}d(s)},g=()=>(n||(n=new FileSystemObserver(i(e=>{r(e)},250))),n);a.parentNode.hidden=!1;a.addEventListener("change",()=>{if(localStorage.setItem("observe-file-changes",a.checked),a.checked){g();for(const[e,{handle:s}]of l.entries())e===c||!s||(n.observe(s),console.log(`${s.name} → Observing changes`));return}n&&(n.disconnect(),n=null)});localStorage.getItem("observe-file-changes")!=="true"?a.checked=!1:a.checked=!0;export{g as getFileSystemChangeObserver};
