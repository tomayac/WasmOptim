var i=512,c=class{constructor(t,r){this.fileBuffer=t,this.size=r,this.offset=0,this.error=!1}hasError(){return this.error}nextByte(){return this.offset===this.size||this.hasError()?(this.error=!0,255):this.fileBuffer[this.offset++]}next(t){const r=[];for(let s=0;s<t;s++)r[s]=this.nextByte();return r}};function a(t){let r=0,s=0;for(;!t.hasError();){const o=t.nextByte();if(s=s|(o&127)<<7*r,!(o&128))break;r++}return s}function h(t){switch(a(t)&7){case 0:return a(t),!0;case 1:return t.next(8),!0;case 2:const o=a(t);return t.next(o),!0;case 5:return t.next(4),!0}return!1}function u(t,r){const s=new c(t,r);let o=0;for(;;){if(!h(s)&&!s.hasError())return!1;if(s.hasError())break;o++}return o>0}function x(t,r){return r===void 0&&(r=t.byteLength),t+""=="[object ArrayBuffer]"&&(t=new Uint8Array(t)),e(t,r)}function e(t,r){if(r===0)return!1;let s=0;const o=Math.min(r,i);if(r>=3&&t[0]===239&&t[1]===187&&t[2]===191||r>=4&&t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255||r>=4&&t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0||r>=4&&t[0]===132&&t[1]===49&&t[2]===149&&t[3]===51)return!1;if(o>=5&&t.slice(0,5).toString()==="%PDF-")return!0;if(r>=2&&t[0]===254&&t[1]===255||r>=2&&t[0]===255&&t[1]===254)return!1;for(let n=0;n<o;n++){if(t[n]===0)return!0;if((t[n]<7||t[n]>14)&&(t[n]<32||t[n]>127)){if(t[n]>193&&t[n]<224&&n+1<o){if(n++,t[n]>127&&t[n]<192)continue}else if(t[n]>223&&t[n]<240&&n+2<o&&(n++,t[n]>127&&t[n]<192&&t[n+1]>127&&t[n+1]<192)){n++;continue}if(s++,n>=32&&s*100/o>10)return!0}}return!!(s*100/o>10||s>1&&u(t,o))}export{e as isBinaryCheck,x as isBinaryFile,u as isBinaryProto};
