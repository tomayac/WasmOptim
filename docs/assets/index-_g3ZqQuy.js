(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const ce="modulepreload",le=function(e){return"/wasmoptim/"+e},G={},z=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=le(a),a in G)return;G[a]=!0;const s=a.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(!!r)for(let l=o.length-1;l>=0;l--){const m=o[l];if(m.href===a&&(!s||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":ce,s||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),s)return new Promise((l,m)=>{d.addEventListener("load",l),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a})},$="/wasmoptim/spinner.svg",y=new Map,K="FileSystemHandle"in window&&"getUniqueId"in FileSystemHandle.prototype,X=async e=>{for(const t of e)await t.handle.requestPermission({mode:"readwrite"})},de=async e=>{const t=[],n=async o=>{const a=await new Promise(s=>o.readEntries(s));await Promise.all(a.map(async s=>{s.isDirectory?await n(s.createReader()):t.push(s)}))},r=e.createReader();return await n(r),t},R=async(e,t,n=e.name,r)=>{const o=[],a=[];for await(const s of e.values()){const c=`${n}/${s.name}`;s.kind==="file"?a.push(s.getFile().then(i=>(i.directoryHandle=e,i.handle=s,Object.defineProperty(i,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>c})))):s.kind==="directory"&&t&&o.push(R(s,t,c))}return[...(await Promise.all(o)).flat(),...await Promise.all(a)]},ue=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],me=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],fe=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],pe=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Z=(e,t,n)=>{let r=e;return typeof t=="string"||Array.isArray(t)?r=e.toLocaleString(t,n):(t===!0||n!==void 0)&&(r=e.toLocaleString(void 0,n)),r};function w(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const n=t.bits?t.binary?pe:fe:t.binary?me:ue,r=t.space?" ":"";if(t.signed&&e===0)return` 0${r}${n[0]}`;const o=e<0,a=o?"-":t.signed?"+":"";o&&(e=-e);let s;if(t.minimumFractionDigits!==void 0&&(s={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(s={maximumFractionDigits:t.maximumFractionDigits,...s}),e<1){const l=Z(e,t.locale,s);return a+l+r+n[0]}const c=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**c,s||(e=e.toPrecision(3));const i=Z(Number(e),t.locale,s),d=n[c];return a+i+r+d}const k=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),he=k?Promise.resolve().then(function(){return ke}):Promise.resolve().then(function(){return Fe});async function ye(...e){return(await he).default(...e)}const ge=k?Promise.resolve().then(function(){return Ee}):Promise.resolve().then(function(){return ze});async function we(...e){return(await ge).default(...e)}const ve=k?Promise.resolve().then(function(){return xe}):Promise.resolve().then(function(){return Ce});async function J(...e){return(await ve).default(...e)}const be=async e=>{const t=await e.getFile();return t.handle=e,t};var Se=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((o,a)=>{t[a]={description:o.description||"Files",accept:{}},o.mimeTypes?o.mimeTypes.map(s=>{t[a].accept[s]=o.extensions||[]}):t[a].accept["*/*"]=o.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(be));return e[0].multiple?r:r[0]},ke={__proto__:null,default:Se};function B(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(o){return{value:o,done:r}})}return B=function(n){this.s=n,this.n=n.next},B.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):t(r.apply(this.s,arguments))}},new B(e)}const Q=async(e,t,n=e.name,r)=>{const o=[],a=[];var s,c=!1,i=!1;try{for(var d,l=function(m){var u,f,h,_=2;for(typeof Symbol<"u"&&(f=Symbol.asyncIterator,h=Symbol.iterator);_--;){if(f&&(u=m[f])!=null)return u.call(m);if(h&&(u=m[h])!=null)return new B(u.call(m));f="@@asyncIterator",h="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());c=!(d=await l.next()).done;c=!1){const m=d.value,u=`${n}/${m.name}`;m.kind==="file"?a.push(m.getFile().then(f=>(f.directoryHandle=e,f.handle=m,Object.defineProperty(f,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>u})))):m.kind!=="directory"||!t||r&&r(m)||o.push(Q(m,t,u,r))}}catch(m){i=!0,s=m}finally{try{c&&l.return!=null&&await l.return()}finally{if(i)throw s}}return[...(await Promise.all(o)).flat(),...await Promise.all(a)]};var Le=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:Q(t,e.recursive,void 0,e.skipDirectory)},Ee={__proto__:null,default:Le},Pe=async(e,t=[{}],n=null,r=!1,o=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const a=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),t.forEach((d,l)=>{a[l]={description:d.description||"Files",accept:{}},d.mimeTypes?(l===0&&s&&d.mimeTypes.push(s),d.mimeTypes.map(m=>{a[l].accept[m]=d.extensions||[]})):s?a[l].accept[s]=d.extensions||[]:a[l].accept["*/*"]=d.extensions||[]}),n)try{await n.getFile()}catch(d){if(n=null,r)throw d}const c=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:a,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&o&&o(c);const i=await c.createWritable();return"stream"in e?(await e.stream().pipeTo(i),c):"body"in e?(await e.body.pipeTo(i),c):(await i.write(await e),await i.close(),c)},xe={__proto__:null,default:Pe},Ae=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const o=[...e.map(i=>i.mimeTypes||[]),...e.map(i=>i.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=o||"",r.style.display="none",document.body.append(r);const a=i=>{typeof s=="function"&&s(),t(i)},s=e[0].legacySetup&&e[0].legacySetup(a,()=>s(n),r),c=()=>{window.removeEventListener("focus",c),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",c)}),r.addEventListener("change",()=>{window.removeEventListener("focus",c),r.remove(),a(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),Fe={__proto__:null,default:Ae},_e=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const o=s=>{typeof a=="function"&&a(),t(s)},a=e[0].legacySetup&&e[0].legacySetup(o,()=>a(n),r);r.addEventListener("change",()=>{let s=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(c=>c.webkitRelativePath.split("/").every(i=>!e[0].skipDirectory({name:i,kind:"directory"})))):s=s.filter(c=>c.webkitRelativePath.split("/").length===2),o(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),ze={__proto__:null,default:_e},qe=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(s,c){const i=s.getReader(),d=new ReadableStream({start:u=>async function f(){return i.read().then(({done:h,value:_})=>{if(!h)return u.enqueue(_),f();u.close()})}()}),l=new Response(d),m=await l.blob();return i.releaseLock(),new Blob([m],{type:c})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const o=()=>{typeof a=="function"&&a()},a=t.legacySetup&&t.legacySetup(o,()=>a(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),o()}),n.click(),null},Ce={__proto__:null,default:qe};const Oe=document.querySelector("#load-wasm"),ee=document.querySelector("#merge-button"),E=document.querySelector("#merge-area"),Te=document.querySelector("#load-directory"),M=document.querySelector("#drop-area"),v=document.querySelector("#results-area"),Be=document.querySelector("#total-delta-size"),De=document.querySelector("#stats-template"),Ie=document.querySelector("#example-template"),Ne=document.querySelector("#stats-header"),D=document.querySelector("#select-all-checkbox"),g=document.querySelector("#overwrite-checkbox"),P=document.querySelector("#observe-file-changes-checkbox"),S=document.querySelector("#observe-directory-changes-checkbox"),te=document.querySelector("#examples-list"),V=document.querySelector("meta[name=theme-color]"),$e=document.querySelector("#stats-files"),Re=document.querySelector("#stats-size"),Me=document.querySelector("#stats-percent"),A=crypto.randomUUID();ee.addEventListener("click",async()=>{const e=E.querySelector(".file-name"),t=E.querySelector(".before-size"),n=E.querySelector(".after-size"),r=E.querySelector(".delta-size"),o=E.querySelector(".spinner");e.hidden=!0,e.dataset.uuid=A,E.hidden=!1,o.src=$,n.classList.remove("error"),n.textContent="",r.textContent="Merging…",r.classList.remove("size-smaller"),r.classList.remove("size-larger"),r.classList.remove("error");const a=[],s=[];v.querySelectorAll("input:checked").forEach(d=>{const l=d.closest("tr").querySelector("[data-uuid]").dataset.uuid,{file:m}=y.get(l);a.push(m),s.push(l)});const c=a.reduce((d,l)=>d+l.size,0);t.textContent=`Σ ${w(c)}`;const i=new Worker(new URL("/wasmoptim/assets/merge-worker-ib07Dost.js",import.meta.url),{type:"module"});i.addEventListener("message",async d=>{if(d.data.status){r.textContent="Optimizing…";return}i.terminate();const{file:l,error:m}=d.data;if(o.removeAttribute("src"),m){const h=new Error(m);n.classList.add("error"),r.classList.add("error"),n.textContent=h.name,r.textContent=h.message;return}e.hidden=!1,e.querySelector("code").textContent=l.name,n.textContent=w(l.size);const u=l.size-c;console.log(`${new Intl.ListFormat("en",{style:"long",type:"conjunction"}).format(a.map(h=>h.name))} merged → Before Σ: ${c} After: ${l.size} Delta: ${u}`);const f=Math.abs(100-l.size/c*100).toFixed(2);r.textContent=Number(f)===0?"no change":`${f}% ${u<0?"smaller":"larger"} (${w(Math.abs(u))})`,r.classList.add(Number(f)===0?"size-larger":u<0?"size-smaller":"size-larger"),y.set(A,{file:l})}),i.postMessage({wasmFiles:a,uuids:s})});const Ue=async(e,t)=>{const n=[],r=async a=>{for(const[s,c]of a)try{n[s]=await c()}catch(i){n[s]=new Error(`Failed with: ${i.message}`)}},o=new Array(t).fill(e.entries()).map(r);return await Promise.allSettled(o),n},je=(e,t)=>{let n;return function(...o){const a=()=>{clearTimeout(n),e(...o)};clearTimeout(n),n=setTimeout(a,t)}},re="https://wasmoptim-stats.glitch.me",He=async(e,t)=>{const n={"Content-Type":"application/json"},r=JSON.stringify({beforeSize:e,afterSize:t});try{await(await fetch(`${re}/saved-bytes`,{method:"POST",headers:n,body:r})).json()}catch(o){if(location.hostname==="localhost")return;console.error(o.name,o.message)}},ne=async()=>{const e={"Content-Type":"application/json"};try{const n=await(await fetch(`${re}/saved-bytes`,{method:"GET",headers:e})).json();$e.textContent=`${n.entryCount} ${n.entryCount===1?"file":"files"}`,Re.textContent=w(n.totalBytesSaved),Me.textContent=Number(n.averagePercentageSaved).toFixed(2)}catch(t){if(location.hostname==="localhost")return;console.error(t.name,t.message)}};ne();const Y="setAppBadge"in navigator;let T=0;const F=async(e,t=!1)=>{Ne.hidden=!1,v.closest("table").hidden=!1;const n=[];for(const r of e){const o=K&&r.handle?await r.handle.getUniqueId():r.name;let a,s,c,i,d,l;const m=v.querySelector(`[data-uuid="${o}"]`);if(m){const u=m.closest("tr");a=u.querySelector(".file-name"),s=u.querySelector(".before-size"),c=u.querySelector(".after-size"),i=u.querySelector(".delta-size"),d=u.querySelector(".spinner"),l=u.querySelector(".merge-checkbox")}else{const u=De.content.cloneNode(!0);a=u.querySelector(".file-name"),s=u.querySelector(".before-size"),c=u.querySelector(".after-size"),i=u.querySelector(".delta-size"),d=u.querySelector(".spinner"),l=u.querySelector(".merge-checkbox"),v.append(u);const f=v.querySelectorAll("tr").length>1;D.closest("th").style.display=f?"":"none",v.querySelectorAll("input").forEach(h=>{h.closest("td").style.display=f?"":"none"})}if(d.src=$,i.textContent="Optimizing…",i.classList.remove("size-smaller"),i.classList.remove("size-larger"),i.classList.remove("error"),c.classList.remove("error"),a.querySelector("code").textContent=r.name,a.classList.add("processing"),l.classList.add("processing"),l.disabled=!0,Y)try{await navigator.setAppBadge(++T)}catch(u){console.error(u.name,u.message)}s.textContent=w(r.size),a.dataset.uuid=o,n.push(()=>new Promise((u,f)=>{const h=new Worker(new URL("/wasmoptim/assets/binaryen-worker-vGG0wOcy.js",import.meta.url));h.addEventListener("message",async _=>{if(h.terminate(),d.removeAttribute("src"),a.classList.remove("processing"),l.classList.remove("processing"),l.disabled=!1,Y){--T;try{T===0?await navigator.clearAppBadge():await navigator.setAppBadge(T)}catch(p){console.error(p.name,p.message)}}const{wasmFileAfter:L,error:j}=_.data;if(j){const p=new Error(j);a.classList.add("error"),c.classList.add("error"),i.classList.add("error"),l.classList.add("error"),l.disabled=!0,c.textContent=p.name,i.textContent=p.message,f(p);return}c.textContent=w(L.size);const x=L.size-r.size;console.log(`${r.name} processed → Before: ${r.size} After: ${L.size} Delta: ${x}`);const N=Math.abs(100-L.size/r.size*100).toFixed(2);i.textContent=Number(N)===0?"no change":`${N}% ${x<0?"smaller":"larger"} (${w(Math.abs(x))})`,i.classList.add(Number(N)===0?"size-larger":x<0?"size-smaller":"size-larger"),y.set(o,{file:L,handle:r.handle,savings:x});const H=[];for(const[p,{savings:O}]of y.entries())p!==A&&H.push(O);const W=H.reduce((p,O)=>p+O,0),ie=W/y.size;if(Be.textContent=`Saved ${w(Math.abs(W))} in total and ${w(Math.abs(ie))} per file on average`,x<0&&(He(r.size,L.size).then(()=>ne()),oe&&k&&g.checked&&r.handle))try{const p=await r.handle.createWritable();await p.write(L),await p.close()}catch(p){console.error(p.name,p.message)}if(I&&P.checked&&r.handle){const{getFileSystemChangeObserver:p}=await z(()=>Promise.resolve().then(()=>se),void 0);p().observe(r.handle),console.log(`File ${r.name} → Observing changes`)}u()}),h.postMessage({wasmFileBefore:r})}))}await Ue(n,"hardwareConcurrency"in navigator?Math.floor(navigator.hardwareConcurrency):4)},q=new Set;let b=null;const We=async e=>{console.log("File system changes detected",e);let t=[];for(const n of e)if(n.type==="modified"){if(n.changedHandle instanceof FileSystemFileHandle){const r=await n.changedHandle.getFile();console.log(`File ${r.name} modified → Re-optimizing`),r.handle=n.changedHandle,t.push(r)}else if(n.changedHandle instanceof FileSystemDirectoryHandle){const r=n.changedHandle;let o=await R(r,!0);console.log(`Directory ${n.changedHandle.name} modified → Getting entries`),o=o.filter(i=>i.type==="application/wasm"||i.name.endsWith(".wasm")||i.name.endsWith(".wat")),t.push(...o);const a=Array.from(y.keys()),s=t.map(async i=>K?await i.handle.getUniqueId():i.name),c=await Promise.all(s);t=t.filter((i,d)=>{const l=c[d];return!a.includes(l)})}}t=[...new Set(t)],F(t)},C=()=>(b||(b=new FileSystemObserver(je(e=>{We(e)},250))),b);localStorage.getItem("observe-file-changes")!=="true"?P.checked=!1:P.checked=!0;localStorage.getItem("observe-directory-changes")!=="true"?S.checked=!1:S.checked=!0;P.parentNode.hidden=!1;P.addEventListener("change",()=>{if(localStorage.setItem("observe-file-changes",P.checked),P.checked){C();for(const[e,{handle:t}]of y.entries())e===A||!t||(b.observe(t),console.log(`File ${t.name} → Observing changes`));return}if(b)for(const[e,{handle:t}]of y.entries())e===A||!t||(b.unobserve(t),console.log(`File ${t.name} → No longer observing changes`))});S.parentNode.hidden=!1;S.addEventListener("change",()=>{if(localStorage.setItem("observe-directory-changes",S.checked),S.checked){C();for(const e of q)b.observe(e),console.log(`Directory ${e.name} → Observing changes`);return}if(b)for(const e of q)b.unobserve(e),console.log(`Directory ${e.name} → No longer observing changes`)});const se=Object.freeze(Object.defineProperty({__proto__:null,getFileSystemChangeObserver:C,observedDirectories:q},Symbol.toStringTag,{value:"Module"}));k&&(g.parentNode.hidden=!1,g.addEventListener("change",()=>{localStorage.setItem("overwrite-original-files",g.checked);const e=[];if(g.checked){for(const[t,{file:n}]of y.entries())t===A||!n.handle||e.push(n);X(e)}}),localStorage.getItem("overwrite-original-files")!=="true"?g.checked=!1:g.checked=!0);const Ge=["https://unpkg.com/canvaskit-wasm@0.39.1/bin/canvaskit.wasm","https://unpkg.com/zxing-wasm@1.0.0-rc.4/dist/full/zxing_full.wasm","https://unpkg.com/@sqlite.org/sqlite-wasm@3.44.0-build1/sqlite-wasm/jswasm/sqlite3.wasm","https://unpkg.com/@tensorflow/tfjs-backend-wasm@4.13.0/wasm-out/tfjs-backend-wasm.wasm"],Ze=/@(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?/;Ge.forEach(e=>{const t=Ie.content.cloneNode(!0),n=t.querySelector("code"),r=t.querySelector("a");n.textContent=e.replace("https://unpkg.com/","").replace(Ze,""),r.href=e,te.append(t)});te.addEventListener("click",async e=>{const t=e.target.nodeName.toLowerCase();if(t!=="a"&&t!=="code")return;e.preventDefault();const n=e.target.closest("a"),r=n.href,o=n.parentNode.querySelector(".downloading");o.textContent="Downloading…",o.classList.remove("error"),o.hidden=!1;const a=n.parentNode.querySelector("img");a.src=$;try{const s=await fetch(r).then(i=>i.blob());a.removeAttribute("src"),o.hidden=!0;const c=new File([s],r.split("/").pop(),{type:"application/wasm"});c.handle=!1,F([c])}catch(s){console.error(s.name,s.message),a.removeAttribute("src"),o.classList.add("error"),o.textContent=s.message}});document.addEventListener("paste",e=>{try{if(!e.clipboardData.files.length)return;const t=Array.from(e.clipboardData.files).filter(n=>n.type==="application/wasm"||n.name.endsWith(".wasm")||n.name.endsWith(".wat"));F(t)}catch(t){console.error(t.name,t.message)}});const U=()=>{const e=v.querySelectorAll("input:checked").length;ee.style.display=e<2?"none":""};U();D.addEventListener("click",()=>{v.querySelectorAll("input:not(:disabled)").forEach(e=>{e.checked=D.checked}),U()});v.addEventListener("click",async e=>{const t=e.target.nodeName.toLowerCase();if(t==="input"||t==="label"){if(e.target.classList.contains("error")||e.target.classList.contains("processing"))return;e.target.checked||(D.checked=!1),U();return}if(t!=="a"&&t!=="code")return;e.preventDefault();const n=e.target.closest("a");if(!n.classList.contains("file-name")||n.classList.contains("error")||n.classList.contains("processing"))return;const r=n.dataset.uuid,{file:o,handle:a}=y.get(r);try{await J(o,{fileName:o.name,extensions:[".wasm",".wat"],mimeTypes:["application/wasm"],existingHandle:a||void 0,startIn:a||void 0})}catch(s){if(s.name==="AbortError")return;console.error(s.name,s.message)}});E.addEventListener("click",async e=>{const t=e.target.nodeName.toLowerCase();if(t!=="a"&&t!=="code")return;e.preventDefault();const n=e.target.closest("a");if(!n.classList.contains("file-name")||n.classList.contains("error")||n.classList.contains("processing"))return;const r=n.dataset.uuid,{file:o,handle:a}=y.get(r);try{await J(o,{fileName:o.name,extensions:[".wasm"],mimeTypes:["application/wasm"],existingHandle:a||void 0,startIn:a||void 0})}catch(s){if(s.name==="AbortError")return;console.error(s.name,s.message)}});Te.addEventListener("click",async()=>{try{const e=await we({recursive:!0,mode:g.checked?"readwrite":"read"}),t=e.filter(n=>n.type==="application/wasm"||n.name.endsWith(".wasm")||n.name.endsWith(".wat"));if(k&&I&&S.checked){let n=[];for(const o of e)n.push(o.directoryHandle);n=[...new Set(n)];const r=C();n.forEach(o=>{r.observe(o,{recursive:!0}),q.add(o),console.log(`Directory ${o.name} → Observing changes`)})}F(t)}catch(e){if(e.name==="AbortError")return;console.error(e.name,e.message)}});Oe.addEventListener("click",async()=>{try{const e=await ye({mimeTypes:["application/wasm"],extensions:[".wasm",".wat"],multiple:!0});if(!e||!e.length)return;F(e)}catch(e){if(e.name==="AbortError")return;console.error(e.name,e.message)}});document.addEventListener("dragover",e=>{e.preventDefault()});document.addEventListener("dragenter",e=>{e.preventDefault(),M.classList.add("drag-hover")});document.addEventListener("dragleave",e=>{e.preventDefault(),e.target===document.documentElement&&M.classList.remove("drag-hover")});document.addEventListener("drop",async e=>{e.preventDefault(),M.classList.remove("drag-hover");const t=[...e.dataTransfer.items].filter(r=>r.kind==="file").map(r=>oe?r.getAsFileSystemHandle():r.webkitGetAsEntry()),n=[];for await(const r of t){if(r.kind==="directory"){let a=await R(r,!0);if(a=a.filter(s=>s.type==="application/wasm"||s.name.endsWith(".wasm")||s.name.endsWith(".wat")),n.push(...a),I&&S.checked){let s=[];for(const i of a)s.push(i.directoryHandle);s=[...new Set(s)];const c=C();s.forEach(i=>{c.observe(i,{recursive:!0}),q.add(i),console.log(`Directory ${i.name} → Observing changes`)})}continue}else if(r.isDirectory){let a=await de(r);a=a.filter(s=>s.name.endsWith(".wasm")||s.name.endsWith(".wat")),n.push(...await Promise.all(a.map(async s=>new Promise(c=>s.file(c)))));continue}let o;r.kind==="file"?(o=await r.getFile(),o.handle=r):r.isFile&&(o=await new Promise(a=>r.file(s=>a(s)))),!(o.type&&o.type!=="application/wasm"||!o.name.endsWith(".wasm")&&!o.name.endsWith(".wat"))&&n.push(o)}k&&k&&g.checked&&await X(n),F(n)});const ae=e=>{if(e.matches){V.content="rgb(32, 33, 36)";return}V.content="#fff"};matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ae);ae(matchMedia("(prefers-color-scheme: dark)"));const oe="getAsFileSystemHandle"in DataTransferItem.prototype,I="FileSystemObserver"in window;(async()=>{if(I&&z(()=>Promise.resolve().then(()=>se),void 0),"launchQueue"in window&&"files"in LaunchParams.prototype&&z(()=>import("./file-handling-E341wfff.js"),__vite__mapDeps([])),"serviceWorker"in navigator){const{registerSW:e}=await z(()=>import("./virtual_pwa-register-_xjRFTwc.js"),__vite__mapDeps([]));e({onOfflineReady(){},onNeedRefresh(){location.reload()}})(),"share"in navigator&&z(()=>import("./web-share-target-mQc0NmZR.js"),__vite__mapDeps([]))}})();export{z as _,F as a,X as c,k as e,g as o};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}