const m=async s=>{const{default:a}=await import("./wasm-opt-CKXaSomM.js"),e=await a({print:()=>{},printErr:n=>s.push(n)});return await e.ready,e};self.addEventListener("message",async s=>{const a=[],e=await m(a),{wasmFileBefore:n,uniqueId:t}=s.data;try{const r=await n.arrayBuffer();e.FS.writeFile(t,new Uint8Array(r));const o=[t,"-o",t,"-Os","--always-inline-max-function-size","--enable-reference-types","--enable-multimemory"],i=[n.name,"-o",n.name,"-Os","--always-inline-max-function-size","--enable-reference-types","--enable-multimemory","⚠️ (Removed) --converge"];if(console.log(`Running wasm-opt ${i.join(" ")}`),e.callMain(o),a.length>0)throw new Error(a.join(". "));const l=e.FS.readFile(t,{encoding:"binary"});e.FS.unlink(t);const c=new File([l],n.name,{type:"application/wasm"});self.postMessage({wasmFileAfter:c})}catch(r){self.postMessage({error:r.message})}});
